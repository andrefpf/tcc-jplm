function(add_thirdparty_lib_test TEST_NAME TEST_BIN_NAME TEST_SOURCE)
    add_executable(${TEST_BIN_NAME} ${TEST_SOURCE})
    target_include_directories(${TEST_BIN_NAME} PRIVATE "${INCLUDE_DIRECTORIES};${openjpeg_INCLUDE}")
    target_link_libraries(${TEST_BIN_NAME} PRIVATE gtest_main)
    target_link_libraries(${TEST_BIN_NAME} PRIVATE image)
    add_test(${TEST_NAME} ${EXECUTABLE_OUTPUT_PATH}/${TEST_BIN_NAME} "${CMAKE_HOME_DIRECTORY}/resources")
endfunction()

add_image_lib_test(CppIterTools cppitertools_tests CppIterToolsTests.cpp)
add_image_lib_test(CLI11 cli11_tests CLI11Tests.cpp)
add_image_lib_test(JSON json_tests NlohmannJSONTests.cpp)
add_image_lib_test(CxxProperties cxx_properties_tests CXXPropertiesTests.cpp)
add_image_lib_test(OpenJPEG openjpeg_tests OpenJPEGTests.cpp)
add_image_lib_test(Magic_enum magic_enum_tests Magic_EnumTests.cpp)
